<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('./partials/head') %>
  </head>
  <body>
    <%- include('./partials/navbar') %>
    <!-- <h1>Blog</h1> -->
    <div class="container mt-4">
      <h1><%= blog.title %></h1>
      <img src=" <%= blog.coverImageUrl %> " width="700px" />
      <pre class="mt-3"><%= blog.body %></pre>
      <div class="mt-5">
        <img
          width="100px"
          style="border-radius: 50%; aspect-ratio: 1/1"
          src="<%= blog.author.profileImageUrl %>"
        />
        <span><%= blog.author.fullName %></span>
      </div>
    </div>
    <% if(locals.user) { %>
    <div class="m-5">
      <form action="/comment/<%= blog._id %>" method="post">
        <div class="mb-3">
          <label for="commentOnPost" class="form-label">Comment On Post</label>
          <input
            type="text"
            class="form-control"
            id="commentOnPost"
            required
            name="commentOnPost"
            aria-describedby="commentOnPost"
          />

          <button type="submit" class="btn btn-primary mt-3">Post</button>
        </div>
      </form>
    </div>
    <% } %>

    <div class="m-3">
      <ul class="list-group list-group-flush">
        <% comments.forEach(comment=>{ %>
        <li class="list-group-item">
          <div class="p-3" style="display: flex; align-items: center">
            <img
              width="50px"
              style="aspect-ratio: 1/1; border-radius: 50%"
              src="<%= comment.author.profileImageUrl %>"
            />
            <div
              class="p-3"
              style="
                display: flex;
                justify-content: center;
                flex-direction: column;
              "
            >
              <h6><%= comment.author.fullName %></h6>
              <p><%= comment.body %></p>
            </div>
          </div>
        </li>
        <% }) %>
      </ul>
    </div>

    <%- include('./partials/scripts') %>
  </body>
</html>
